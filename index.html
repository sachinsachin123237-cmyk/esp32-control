<!DOCTYPE html>
<html>
<head>
    <title>4-Mode Wheelchair Control</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <style>
        body { text-align:center; font-family:Arial, sans-serif; background:#f0f2f5; padding:20px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 400px; margin: 0 auto; }
        .btn { padding: 30px; font-size: 20px; border: none; border-radius: 15px; cursor: pointer; color: white; font-weight: bold; }
        .straight { background: #4CAF50; grid-column: span 2; }
        .back { background: #2196F3; grid-column: span 2; }
        .left { background: #9C27B0; }
        .right { background: #FF9800; }
        #status { font-size: 22px; margin: 30px; color: #1976D2; font-weight: bold; }
        .blink-info { font-size: 14px; color: #666; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>ü¶Ω Wheelchair Modes</h1>
    <div id="status">Connecting...</div>
    <div class="blink-info">Straight (1) | Back (2) | Left (3) | Right (4)</div>

    <div class="grid">
        <button class="btn straight" onclick="send('F')">‚¨ÜÔ∏è STRAIGHT</button>
        <button class="btn left" onclick="send('L')">‚¨ÖÔ∏è LEFT</button>
        <button class="btn right" onclick="send('R')">‚û°Ô∏è RIGHT</button>
        <button class="btn back" onclick="send('B')">‚¨áÔ∏è BACK</button>
    </div>

    <script>
        const broker = 'wss://da5d5e6e407e495db2c68d35b34b405b.s1.eu.hivemq.cloud:8884/mqtt';
        const client = mqtt.connect(broker, {
            username: 'wheel',
            password: 'Wheel123',
            clientId: 'web_mode_' + Math.random().toString(16).substr(2, 8)
        });

        client.on('connect', () => {
            document.getElementById('status').innerText = "Connected - Select Mode";
            client.subscribe('sachin/esp32/nav/status');
        });

        client.on('message', (topic, message) => {
            document.getElementById('status').innerText = message.toString();
        });

        function send(mode) {
            client.publish('sachin/esp32/nav/control', mode);
        }
    </script>
</body>
</html>
