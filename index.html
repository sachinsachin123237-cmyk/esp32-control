#include <WiFi.h><!DOCTYPE html>
<html>
<head>
    <title>Wheelchair MQTT Control</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <style>
        body { text-align:center; font-family:Arial; background:#f0f0f0; padding:20px; }
        .section { margin: 20px auto; padding: 20px; background: white; border-radius: 10px; max-width: 400px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        button { font-size:18px; padding:15px; margin:10px; width: 80%; border-radius:8px; border:none; cursor:pointer; color:white; }
        .start { background:#4CAF50; }
        .room1 { background:#9C27B0; }
        .room2 { background:#FF9800; }
        .stop { background:#f44336; font-weight:bold; }
        #status { font-size:20px; margin:20px; font-weight:bold; color:#1976D2; }
    </style>
</head>
<body>
    <h1>ğŸ¦½ Wheelchair Navigation</h1>
    <div id="status">Connecting to MQTT...</div>

    <div class="section">
        <button class="start" onclick="sendCmd('START')">ğŸ  GO TO START</button>
        <button class="room1" onclick="sendCmd('ROOM1')">ğŸšª GO TO ROOM 1</button>
        <button class="room2" onclick="sendCmd('ROOM2')">ğŸšª GO TO ROOM 2</button>
    </div>

    <div class="section">
        <button class="stop" onclick="sendCmd('STOP')">ğŸ›‘ EMERGENCY STOP</button>
    </div>

    <script>
        const broker = 'wss://da5d5e6e407e495db2c68d35b34b405b.s1.eu.hivemq.cloud:8884/mqtt';
        const options = {
            username: 'hivemq.webclient.1765988598964',
            password: 'EgKs56<ae$f.,zW4L7JU',
            clientId: 'web_' + Math.random().toString(16).substr(2, 8)
        };

        const client = mqtt.connect(broker, options);

        client.on('connect', () => {
            document.getElementById('status').innerText = 'Connected - Ready';
            client.subscribe('sachin/esp32/nav/status');
        });

        client.on('message', (topic, message) => {
            document.getElementById('status').innerText = 'Status: ' + message.toString();
        });

        function sendCmd(cmd) {
            client.publish('sachin/esp32/nav/control', cmd);
        }
    </script>
</body>
</html>
